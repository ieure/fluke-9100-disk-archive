Fluke 9100 Floppy Archive
=========================

This is an attempt to create a comprehensive archive of factory media
for the Fluke 9100 series of microsystem troubleshooters.

Organization
============

Individual disks are organized into disksets, which represent a
logical collection of disks.  Both disks and disksets are identified
with a descriptive name, version, disk number, dump number, and dump
status.

Descriptive Names
-----------------

These are usually the text printed on the disk label.

Version
-------

The version of the data contained on the disk.

Disk Number
-----------

When data is split across multiple disks, the number is indicated as
D1, D2, etc.  Optional if the disk is self-contained.

Dump Number
-----------

Dump numbers start at 01 and increment by one for each dump of a
distinct physical disk.  For example, if there are two copies of the
9100A-68000-POD_USER_DISK-V1.0 disk, the first dump would be assigned
01, and the second 02.  Re-dumping the same physical disk is not
encouraged, but a dump of a second factory copy containing the same
data may be desirable if the first media is damaged.

Dump Status
-----------

This consists of two letters, represeting the media and dump status.

O - Original, unmodified media.
M - Modified media.

I - Incomplete, disks missing from diskset.
G - Good dump, all sectors read successfully.
B - Bad dump, some sectors unreadable.

The status of a diskset is the same as the worst of each status of
every disk in the set.  If a diskset contains all original disks, with
one bad dump, the diskset's status is OB.  A diskset can't have a
status of OG unless every disk is original and dumped successfully.

Examples
--------

MASTER_USER_DISK-D1-V4.1,01-OG
^^^^^^^^^^^^^^^^ ^^ ^^^^ ^^ ^^
|                 |    |  | ||
|                 |    |  | | ` Good dump
|                 |    |  | |
|                 |    |  |  ` Unmodified media
|                 |    |  |
|                 |    |   ` First dump of this disk
|                 |    |
|                 |     ` Disk version 4.1
|                 |
|                  ` Disk 1
|
 ` Description of the data


Directory Structure
-------------------

The top level of the archive contains directories representing
disksets; underneath that is another directory for the disk(s) in the
set.

Each diskset directory contains a CATALOG file with additional
information about the dump, photos of -FRONT and -BACK photos of the
disks archived, an INDEX file with the contents of the disk, and a ZIP
archive of the KryoFlux STREAM.

Some userdisks are archived in the NON-FACTORY directory.  These aren't
original, but may contain things of interest.

Writing Media
=============

Disks are preserved in the Kryoflux STREAM format, which allows
perfect copies to be created.  Because these are archival images for
specialized hardware, they're larger than a typical disk image, and
cannot be used directly without Kryoflux hardware.  However, SAMDisk
supports KryoFlux STREAM images, and can be used to write the images
to disks, or to convert to a more convenient format.

To write an image to disk with SAMDisk:

SAMDISK COPY MASTER_USER_DISK-D1-V4.1,01-OG.img00.0.raw A:

To write an image to disk with Kryoflux's DTC:

dtc -fMASTER_USER_DISK-D1-V4.1,01-OG.img00.0.raw -w

To convert to ImageDisk format:

SAMDISK COPY MASTER_USER_DISK-D1-V4.1,01-OG.img00.0.raw MUD1.IMD

To convert to TeleDisk format:

SAMDISK COPY MASTER_USER_DISK-D1-V4.1,01-OG.img00.0.raw MUD1.TD0

The original media is double-density 3.5" floppy disks, and it's
recommended that you write them to the same type of disk.  If you use
high-density media, you *must* degauss it first, using a bulk magnetic
eraser or similar electromagnetic device.  Formatting in a
high-density drive is not sufficient.  Failure to degauss high-density
media will likely result in read failures, as the larger
double-density disk head may pick up stray magnetic fields from the
adjacent high-density tracks.  Additionally, you should cover the
high-density indicator hole on the disk to ensure uniform handling,
for example in a mainframe with a high-density drive.

Installing on SCSI2SD
=====================

The SCSI2SD is a popular option for replacing SCSI disks.  It's
compatible with the 9100, but there are some considerations which this
document attempts to capture.

The 9100A shipped with a 20mb MiniScribe 8425 MFM hard disk, which
required an interface PCB to work with the mainframe.  Later, Fluke
released a 40mb field upgrade kit, using a Quantum ProDrive ELS SCSI
disk.  The 9100FT models shipped with the larger Quantum drive.

Prerequisites
-------------

You must have:

 - Fluke 9100 Service Disk v1.4.  This is included in this archive as
   9100-SERVICE-V1.4,NN-MG.
 - Mainframe ROMs v5.0.  These are included in this archive as
   9100A-ROM-V5.0,NN-OG.
 - A SCSI2SD v5.
 - A SD card, nearly any size will do.
 - Several blank 3.5" DSDD floppy disks.  Exact number varies
   depending on system version, desired options, and whether you want
   to overwrite media while installing.

Additionally, if you're installing on a 9100FT, you will need:

 - A 50-pin SCSI ribbon cable with two connectors.
 - A terminator.

Disk Geometry
-------------

The MiniScribe has CHS of 615/4/17, 41,820, sectors, 512 bytes/sector,
for 21,411,840 bytes of capacity.

The ProDrive ELS has CHS of 968/5/17, 82,280 sectors total, 512
bytes/sectors, providing a total capacity of 42,127,360 bytes.

SCSI2SD Configuration
---------------------

Set your SCSI2SD up as follows:

Device 1:
Enabled
SCSI ID 0
SD card start sector 0
Sector size 512 bytes
Sector count 82280

Devices 2-4 disabled.

All other settings default.

Install the SD card in the SCSI2SD.

This will exactly simulate the upgraded 40mb SCSI disk.  While the
9100 can format disks up to around 1gb in size, this is vastly larger
than they were designed to work with, and I'd recommend sticking to
the 40mb settings unless you have very good reason not to.

Mainframe-Specific Concerns
---------------------------

The 9100A mainframes will operate with the resistor pack terminators
that come with the SCSI2SD.  This does not work on the 9100FT, which
requires an external terminator.  You must replace the SCSI ribbon
cable and terminate the end.

Installing the SCSI2SD
----------------------

Open the mainframe by removing 5 screws from the bottom of the case,
three Philips at the front, two slotted at the rear.  Flip the
mainframe over and gently lift from the sides.  The disks and power
supply are installed in the top of the case, and connected via cables
at left; be careful not to pull them.  Set the top of the case on its
side, next to the mainframe, and disconnect all cables: A square
connector to the power supply; an in-line header from the power supply
to the motherboard; floppy cable from the motherboard; SCSI cable from
the hard disk (if installed).



Flip the top of the case so it's upside-down and you can access the
disk cage.  Remove the 7 Philips screws and gently pull the cage away
from the side of the case, then up and out.  Remove the hard disk, if
installed.  Install the SCSI2SD in its place.  You will need to
acquire or fabricate a 3.5" disk bay mount for it, as it's
significantly smaller than the disk it's replacing.

Leaving the mainframe open and disk cage uninstalled, connect the
SCSI2SD to the SCSI bus and power, reconnect the floppy cable, and
reconnect the power cables.

Upgrade 9100A mainframe ROMs
----------------------------

9100FT owners can skip this.

Use of a 40mb disk or software newer than V4.x on a 9100A requires
V5.0 ROMs to be installed.  If your mainframe has factory ROMs, the
version will be printed on a label on top.

The 9100A V5.0 ROMs are included in this archive for convenience.

The V5.0 ROMs can be programmed onto 27C512 EPROMs.  Because these are
different devices than the V3.0 ROMs, you will need to change the ROM
strapping by severing the link at W2, just below the RAM slots.
Use a fresh blade on an X-Acto or similar hobby knife to carefully
open this jumper, then verify no continuity with a multimeter.
Install the new EPROMs and boot the machine to verify that it's
working.

Setting up the Fluke
--------------------

1. Boot from the service disk by inserting it into the drive and
   powering up the mainframe. Hold down SOFT KEYS + F2 + F4 until the
   mainframe displays "Starting From Disk In /DR1."
2. Select "SET CONFIG."
3. Set the type of unit to 9100.
4. Set the hard disk type to "SCSI - 512 byte sectors."
5. Leave all other settings unchanged.  Do not turn on disk error
   reporting.
6. Select MORE, then "HARD DISK FMAT."
7. Format the hard disk.

Your mainframe is ready to install.

Installation
------------

Write disk images to media.  Depending on the system version, you will
need two or three disks for the OS, two for userdisks, and additional
disks for the programmer's option, IEEE488 support, etc.

Boot from System Disk 1 in the same way as you booted the service
disk.  

FIXME